import requests, json
# api key
api_key = "a255d05011ec6ceb1fd67a16aeccb147"

# not sure why this function doesn't work
# city parameter in api becomes unresolved when using this function
#def get_city():
    #city = input("Please enter city name: ")
    #return city

# ask user for input
city = input("Please enter your city name: ")

# full api call
# units are imperial to get fahrenheit
api_call = "https://api.openweathermap.org/data/2.5/weather?q="+city+"&appid="+api_key+"&units=imperial"

# http request
response = requests.get(api_call)
api_data = response.json()

# function
def show_weather_info():
    # variables
    temperature = (api_data['main']['temp'])
    like_temp = (api_data['main']['feels_like'])
    humid = (api_data['main']['humidity'])
    # delete decimals
    t = int(temperature)
    lt = int(like_temp)

    # print calls
    print(f"\n{city.title()} Forecast")
    print(f"Current Temperature: {t}ยบ")
    print(f"Feels Like: {lt}ยบ")
    print(f"Humidity: {humid}%")

# validate user input
# call function if city found
if response.status_code == 200:
    show_weather_info()

# display error if invalid
else:
    print("City not found.")

# ask user if they would like another forecast
newCity = input("Do you want to check the forecast for another city? (yes or no): ")
while newCity == "yes" or newCity == "y":
    # would like to call a function here to get city name
    # as is this just reprints the old info
    input("Please enter a city location: ")
    show_weather_info()



    #newCity = input("Do you want to check the forecast for another city? (yes or no): ")
    if newCity == "no":
        print("Thanks for visiting.")
